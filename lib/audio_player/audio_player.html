<style>
    .highlight {
        background: lightyellow;
    }

    .pointer {
       cursor: pointer;
    }

    #timeline {
        width: 40vw;
        height: 20px;
        background: gray;
        margin-top: 20px;
        border-radius: 15px;
    }

    @media screen and (max-width: 657px) {
        #timeline {
            width: 65vw;
        }
    }

    #playhead {
        width: 18px;
        height: 18px;
        border-radius: 50%;
        margin-top: 1px;
        background: black;
    }

    .time {
        margin: 20px 20px 0px 20px;
    }

    .horizonal-layout {
        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;
        justify-content: center;
        align-items: center;
    }
    .loading {
        position: static;
        top: 45%;
        width: 100%;
        z-index: 200000;
    }
</style>

<h1 class="text-center">{{ title }}</h1>
<div class="container" style="background-color: white; padding: 10px;">
    <div [ngStyle]="{'height': playerHeight}" style="overflow: auto; border: 1px solid black;">
        <table class="table">
            <tr>
                <th>Song</th>
                <th>Artist</th>
            </tr>
            <tr *ngFor="#song of songList; #i = index" [class.highlight]="song.selected" class="pointer">
                <td (click)="playSelectedSong(i)">{{ i + 1 }}. {{ song.name }}</td><td>{{artist}}</td>
            </tr>
        </table>
    </div>

    <div class="loading layout horizontal center-justified no-wrap" [hidden]="hideSpinner">
        <img [src]="pathToSpinner" style="width: 30px; height:30px; margin-top:15px;"/>
        <h3>LOADING...</h3>
    </div>
    <div class="text-center" [hidden]="!hideSpinner"><h3>{{ currentSongId + 1 }} - {{ currentSong.name }}</h3></div>
    <div class="text-center">
        <button (click)="changeSong('prev')" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-backward" aria-hidden="true"></span></button>
        <button (click)="play()" class="btn btn-default btn-lg"><span aria-hidden="true" [ngClass]="playPause"></span></button>
        <button (click)="stop()" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-stop" aria-hidden="true"></span></button>
        <button (click)="changeSong('next')" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-forward" aria-hidden="true"></span></button>

    </div>


    <div class="horizonal-layout" draggable="false">
        <div class="time" draggable="false">{{ currentMinute }}:{{ currentSecond | formatseconds }}</div>
        <div>
            <div id="timeline" #timeline (mousedown)="handleMouseDown($event)" (click)="handleMouseMoveOrClick($event)">
                <div id="playhead" #playhead [ngStyle]="{'margin-left': playHeadPosition}"></div>
            </div>
        </div>
        <div class="time" draggable="false">{{ minutes }}:{{ seconds | formatseconds }}</div>
    </div>
</div>
<audio #player (ended)="changeSong('next')" (timeupdate)="timeUpdate()" (canplaythrough)="setDuration()" preload (canplay)="stopSpinner()">
    <source [src]="currentSongPath" type="audio/ogg">
    <source [src]="currentSongPath" type="audio/mpeg">
</audio>

